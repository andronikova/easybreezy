{% extends "layout.html" %}

{% block title  %}
        settings
{% endblock %}

{% block main %}
<h5>
<button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for( 'settings_change') }}';">Change accounts values</button>

    Add new
    <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for( 'add_expenses') }}';">new expenses</button>
    <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for( 'add_savings') }}';">new savings</button>
    <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for( 'add_goals') }}';">new goal</button>

</h5>

<h5>Your expenses
</h5>

<table class="table">
    <thead>
        <tr>
            <td>name</td>
            <td>value</td>
            <td></td>
        </tr>
    </thead>
    <tbody>
    {% for key in expenses %}
        <tr>
            <td>{{key}}</td>
            <td>{{expenses[key]['value']}}</td>
            <td>
                <form action="\settings" method="POST" onSubmit="return confirm('Are you sure you wish to delete {{key}}?');">
                        <button name='delete_account' class="btn btn-primary" value={{key}}>Delete</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>

</table>


<h5>Your saving accounts
</h5>
<table class="table">
    <thead>
        <tr>
            <td>name</td>
            <td>type</td>
            <td>percent</td>
            <td>current value</td>
            <td>goal</td>
            <td>progress</td>
            <td></td>

        </tr>
    </thead>
    <tbody>
    {% for key in savings %}
        <tr>
            <td>{{key}}</td>
            <td>
                {% if key == user_info['reserve_account'] %}
                    reserve
                {% endif %}
            </td>
            <td>{{savings[key]['percent']}} %</td>
            <td>{{savings[key]['value']}}</td>
            <td>{{savings[key]['goal']}}</td>
            <td>
                <div class="progress" style="display:inline-block;">
                  <div class="progress-bar" role="progressbar" aria-valuenow={{savings[key]['progress']}}
                  aria-valuemin="0" aria-valuemax="100" style={{savings[key]['for_bar']}} >
                      <div >
                          <a href="#" data-toggle="tooltip" title={{savings[key]['value']}}/{{savings[key]['goal']}} style="color:black;">{{savings[key]['progress']}} %_______</a>
                          </div>
                  </div>
                </div>
            </td>
            <td>
                <form action="\settings" method="POST" onSubmit="return confirm('Are you sure you wish to delete {{key}}?');">
                    <button name='delete_account' class="btn btn-primary" value={{key}}>Delete</button>
                </form>
            </td>

        </tr>
    {% endfor %}
    </tbody>
</table>

<h5>Your goals
</h5>
<table class="table">
    <thead>
        <tr>
            <td>name</td>
            <td>current value</td>
            <td>goal</td>
            <td>goal date</td>
            <td>progress</td>
            <td></td>
        </tr>
    </thead>
    <tbody>
    {% for key in goals %}
        <tr>
            <td>{{key}}</td>
            <td>{{goals[key]['value']}}</td>
            <td>{{goals[key]['goal']}}</td>
            <td>{{goals[key]['date']  }}</td>
            <td>
                <div class="progress" style="display:inline-block;">
                  <div class="progress-bar" role="progressbar" aria-valuenow={{goals[key]['progress']}}
                  aria-valuemin="0" aria-valuemax="100" style={{goals[key]['for_bar']}} >
                      <div >
                          <a href="#" data-toggle="tooltip" title={{goals[key]['value']}}/{{goals[key]['goal']}} style="color:black;">{{goals[key]['progress']}} %_______</a>
                          </div>
                  </div>
                </div>
            </td>
            <td>
                <form action="\settings" method="POST" onSubmit="return confirm('Are you sure you wish to delete {{key}}?');">
                    <button name='delete_account' class="btn btn-primary" value={{key}}>Delete</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<div></div>
<div></div>
<table class="table">
    <tbody>
    <tr>
        <td><h4>User info</h4></td>
        <td>email</td>
        <td>{{user_info['email']}}</td>
        <td>
            <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for( 'change_email') }}';">Change email</button>
        </td>
        <td>
            <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for( 'change_password') }}';">Change password</button>
        </td>
        <td>
            <form action="\settings" method="POST" onSubmit="return confirm('Are you sure you wish to delete this user?');">
                <div class="form-group" >
                    <input id="delete" name="delete" type="submit" value="Delete this user" class="btn btn-primary mb-2">
                </div>
            </form>
        </td>
    </tr>

    </tbody>

</table>


<script>
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip();
    });

</script>

{% endblock %}